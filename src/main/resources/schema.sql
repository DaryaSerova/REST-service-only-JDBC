drop table IF EXISTS ORDER_T;
drop table IF EXISTS USER_PERMISSION_T;
drop table IF EXISTS PERMISSION_T;
drop table IF EXISTS USER_T;

create TABLE IF NOT EXISTS PERMISSION_T (
       ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
       TYPE CHARACTER VARYING (255),
       CONSTRAINT PERMISSION_T_PK PRIMARY KEY (ID)
);

create TABLE IF NOT EXISTS USER_PERMISSION_T (
       USER_ID BIGINT NOT NULL,
       PERMISSION_ID BIGINT NOT NULL
);

create TABLE IF NOT EXISTS USER_T (
       ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
       NAME CHARACTER VARYING (255),
       CONSTRAINT USER_T_PK PRIMARY KEY (ID)
);

create TABLE IF NOT EXISTS ORDER_T (
       ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
       NAME CHARACTER VARYING (255),
       USER_ID BIGINT NOT NULL,
       CONSTRAINT ORDER_T_PK PRIMARY KEY (ID),
       CONSTRAINT ORDER_T_FK FOREIGN KEY (USER_ID) REFERENCES USER_T(ID) ON delete CASCADE ON update CASCADE
);

insert into PERMISSION_T(id, type) values(1, 'ADMIN'), (2, 'READ'), (3, 'WRITE');